# Базовая тема для разработки на WP

Эта базовая тема предназначена для быстрого старта разработки простых сайтов на базе следующих технологий:
- [Local](https://localwp.com/)
- [Wordpress](https://ru.wordpress.org/)
- [ACF Pro](https://www.advancedcustomfields.com/)
- [Vite.js](https://vite.dev/)

## Необходимые плагины

Данные плагины WordPress **необходимы** для работы с темой:

- [ACF Pro](https://www.advancedcustomfields.com/)
- [Clearfy](https://ru.wordpress.org/plugins/clearfy/)

## Начало работы
1. Установить **Local**
2. Добавить новый сайт в Local с SSL сертификатом
3. Установить Wordpress
4. Поставить необходимые плагины и активировать их.
5. Импортировать конфиги плагинов ACF и Clearfy
6. Скачать данную тему и разместить её в каталоге тем WordPress ```/wp-content/themes/{THEME_NAME}```. Название папки ```{THEME_NAME}``` можно изменить по своему усмотрению.
7. Запустить **VS Code** из каталога с темой посредством команды терминала Windows ```code .```
8. Установить ***npm*** пакеты зависимостей командой ```npm install```

После этих действий можно считать первичную установку завершённой и переходить к работе.

## Команды
```npm install``` - установка зависимостей

```npm run dev``` - запуск сервера разработки

```npm run build``` - создание билда перед загрузкой файлов на хостинг

## Примеры конфигов

Для быстрого старта разработки в папке **examples** лежат примеры начальных конфигов для ACF и Clearfy в формате json. Рекомендуется использовать их перед началом работы. 

## Режим dev / production

Переключение режимов осуществляется в файле ```functions.php```

```define( 'IS_DEVELOPMENT', true );``` - режим разработки

```define( 'IS_DEVELOPMENT', false );``` - режим продакшна. используется на готовом сайте. 

> Для работы в режиме **продакшна** требуется наличие скомпилированных файлов в папке ```/dist```

## Билд проекта

После внесения необходимых изменений в SCSS и JS, перед загрузкой сайта на продакш, необходимо сделать билд проекта.

Он делается при помощи команды ```npm run build```

В этот момент в папке ```/dist``` сначала **удаляются** старые, а затем создаются новые скомпилированные файлы css и js, которые нужно будет загрузить на сайт. 

> Если папки ```/dist``` в теме ещё нет, то она будет создана автоматически.

> Вместе с каждым новым билдом в папке темы ```/dist``` создается также файл ```manifest.json``` в котором автоматически прописанны ссылки на скомпилированные файл css и js. Он нужен для подключения файлов при помощи php. 

> Не рекомендуется делать какие-либо ручные изменения в файлах в папке ```/dist```, т.к. при следующей компиляции они будут удалены.

## Загрузка изменений на сайт

Все **php** файлы темы загружаются, как есть. Они не компилируются.

Папку ```/dist``` обязательно загружать на сайт и для сайта **обязательно** должен быть включен режим продакшна. Рекомендуется целиком очищать содержимое папки ```/dist``` при загрузке новых скомпилированных css и js файлов на сайт.

Папки и файлы, которые **не нужно** загружать на сайт:

- ```/node_modules```
- ```/src```
- ```/examples```
- .gitignore
- readme.md
- vite.config.js
- main.js
- package.json
- package-lock.json